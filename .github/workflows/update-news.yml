name: è‡ªå‹•ç”¢ç”Ÿæ–°è JSON

on:
  schedule:
    - cron: '13 16 * * *'  # å°ç£æ™‚é–“ 00:13ï¼ˆUTC 16:13ï¼‰
  workflow_dispatch:      # å¯æ‰‹å‹•è§¸ç™¼

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: ä¸‹è¼‰ repo
        uses: actions/checkout@v3

      - name: å®‰è£ Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: å®‰è£ä¾è³´ï¼ˆå¯è·³éï¼‰
        run: npm install || true

      - name: ç”¢ç”Ÿ news.json
        run: node generateNews.js

      - name: Commit ä¸¦æ¨å› GitHub
        run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
          git add news.json
          git commit -m "ğŸ“° è‡ªå‹•æ›´æ–°æ–°è"
          git push
